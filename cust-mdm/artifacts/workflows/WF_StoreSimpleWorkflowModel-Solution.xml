<?xml version="1.0" encoding="UTF-8"?>
<root>
    <definition>
        <process>
            <moduleName>cust-mdm</moduleName>
            <dataContext>
                <variable>
                    <name>dataspace</name>
                    <inputParameter>true</inputParameter>
                    <outputParameter>true</outputParameter>
                </variable>
                <variable>
                    <name>dataset</name>
                    <defaultValue>StoreDataSet-Solution</defaultValue>
                    <inputParameter>true</inputParameter>
                    <outputParameter>false</outputParameter>
                </variable>
                <variable>
                    <name>itemTable</name>
                    <defaultValue>/root/Item,/root/Stores,/root/Inventory</defaultValue>
                    <inputParameter>true</inputParameter>
                    <outputParameter>false</outputParameter>
                </variable>
                <variable>
                    <name>item</name>
                    <inputParameter>true</inputParameter>
                    <outputParameter>true</outputParameter>
                </variable>
                <variable>
                    <name>steward</name>
                    <inputParameter>true</inputParameter>
                    <outputParameter>true</outputParameter>
                </variable>
            </dataContext>
            <quickLaunching>false</quickLaunching>
            <synchronousLaunching>false</synchronousLaunching>
            <permissionsOnInstances>
                <create>RRole1</create>
                <creatorIsViewer>false</creatorIsViewer>
            </permissionsOnInstances>
        </process>
        <pnode>
            <idInProcess>-1</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Initial transition</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                    <label>Transition initiale</label>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
        </pnode>
        <pnode>
            <idInProcess>0</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Create a child dataspace</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>true</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <scriptTask>
                <bean>
                    <library>true</library>
                    <osdClass>ebx-root-1.0@com.orchestranetworks.workflow.beans.ScriptTaskCreateBranchI18n</osdClass>
                    <param>
                        <paramName>initialBranch</paramName>
                        <paramValue>Reference</paramValue>
                    </param>
                    <param>
                        <paramName>label</paramName>
                        <paramValue>abc</paramValue>
                    </param>
                    <param>
                        <paramName>owner</paramName>
                        <paramValue>RDataSteward</paramValue>
                    </param>
                    <outputMappingParam>
                        <paramName>newHome</paramName>
                        <paramValue>dataspace</paramValue>
                    </outputMappingParam>
                </bean>
            </scriptTask>
        </pnode>
        <pnode>
            <idInProcess>1</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Create an Item record</label>
                    <description>Create an Item record</description>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <userTask>
                <version>2</version>
                <offerPolicy>
                    <offeredToProfiles>RRole1</offeredToProfiles>
                </offerPolicy>
                <followUp>
                    <offeredToFollowUp>0</offeredToFollowUp>
                    <allocatedToFollowUp>0</allocatedToFollowUp>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </followUp>
                <threshold>
                    <relativeThreshold>
                        <duration>0</duration>
                    </relativeThreshold>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </threshold>
                <action>
                    <enableReject>false</enableReject>
                    <enableConfirmationRequest>false</enableConfirmationRequest>
                    <customizedAcceptLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptLabel>
                    <customizedAcceptConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptConfirmationMessage>
                    <customizedRejectLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectLabel>
                    <customizedRejectConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectConfirmationMessage>
                    <serviceDeclarationKey>ebx-root-1.0@creation</serviceDeclarationKey>
                    <enableComment>true</enableComment>
                    <input>
                        <parameters>
                            <name>service</name>
                            <value>@creation</value>
                        </parameters>
                        <parameters>
                            <name>branch</name>
                            <value>${dataspace}</value>
                        </parameters>
                        <parameters>
                            <name>instance</name>
                            <value>${dataset}</value>
                        </parameters>
                        <parameters>
                            <name>xpath</name>
                            <value>${itemTable}</value>
                        </parameters>
                    </input>
                    <output>
                        <parameters>
                            <name>created</name>
                            <value>item</value>
                        </parameters>
                    </output>
                </action>
                <bean>
                    <osdClass>com.cust.mdm.cust.usertask.UserTaskManagement</osdClass>
                </bean>
                <termination>
                    <completionStrategy>allWorkItemsCompleted</completionStrategy>
                    <rejectionThreshold>0</rejectionThreshold>
                </termination>
            </userTask>
        </pnode>
        <pnode>
            <idInProcess>2</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Check the Item record</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <userTask>
                <version>2</version>
                <offerPolicy>
                    <offeredToProfiles>UApprovalRole</offeredToProfiles>
                </offerPolicy>
                <followUp>
                    <offeredToFollowUp>0</offeredToFollowUp>
                    <allocatedToFollowUp>0</allocatedToFollowUp>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </followUp>
                <threshold>
                    <relativeThreshold>
                        <duration>0</duration>
                    </relativeThreshold>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </threshold>
                <action>
                    <enableReject>true</enableReject>
                    <enableConfirmationRequest>false</enableConfirmationRequest>
                    <customizedAcceptLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptLabel>
                    <customizedAcceptConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptConfirmationMessage>
                    <customizedRejectLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectLabel>
                    <customizedRejectConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectConfirmationMessage>
                    <serviceDeclarationKey>ebx-root-1.0@default</serviceDeclarationKey>
                    <enableComment>true</enableComment>
                    <input>
                        <parameters>
                            <name>service</name>
                            <value>@default</value>
                        </parameters>
                        <parameters>
                            <name>branch</name>
                            <value>${dataspace}</value>
                        </parameters>
                        <parameters>
                            <name>instance</name>
                            <value>${dataset}</value>
                        </parameters>
                        <parameters>
                            <name>xpath</name>
                            <value>${item}</value>
                        </parameters>
                    </input>
                    <output/>
                </action>
                <bean/>
                <termination>
                    <completionStrategy>allWorkItemsCompleted</completionStrategy>
                    <rejectionThreshold>0</rejectionThreshold>
                </termination>
            </userTask>
        </pnode>
        <pnode>
            <idInProcess>3</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Is the Item record accepted ?</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <condition>
                <bean>
                    <library>true</library>
                    <osdClass>ebx-root-1.0@com.orchestranetworks.workflow.beans.ConditionIsLastUserTaskAccepted</osdClass>
                </bean>
            </condition>
        </pnode>
        <pnode>
            <idInProcess>4</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Merge the dataspace</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <scriptTask>
                <bean>
                    <library>true</library>
                    <osdClass>ebx-root-1.0@com.orchestranetworks.workflow.beans.ScriptTaskMergeBranch</osdClass>
                    <param>
                        <paramName>branchName</paramName>
                        <paramValue>${dataspace}</paramValue>
                    </param>
                </bean>
            </scriptTask>
        </pnode>
        <pnode>
            <idInProcess>5</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Correct the Item record</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <firstInProcess>false</firstInProcess>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <userTask>
                <version>2</version>
                <offerPolicy>
                    <offeredToProfiles>RRole1</offeredToProfiles>
                </offerPolicy>
                <followUp>
                    <offeredToFollowUp>0</offeredToFollowUp>
                    <allocatedToFollowUp>0</allocatedToFollowUp>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </followUp>
                <threshold>
                    <relativeThreshold>
                        <duration>0</duration>
                    </relativeThreshold>
                    <administratorNotificationRequired>true</administratorNotificationRequired>
                </threshold>
                <action>
                    <enableReject>false</enableReject>
                    <enableConfirmationRequest>false</enableConfirmationRequest>
                    <customizedAcceptLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptLabel>
                    <customizedAcceptConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedAcceptConfirmationMessage>
                    <customizedRejectLabel>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectLabel>
                    <customizedRejectConfirmationMessage>
                        <localizedDocumentations>
                            <locale>en_US</locale>
                        </localizedDocumentations>
                        <localizedDocumentations>
                            <locale>fr_FR</locale>
                        </localizedDocumentations>
                    </customizedRejectConfirmationMessage>
                    <serviceDeclarationKey>ebx-root-1.0@default</serviceDeclarationKey>
                    <enableComment>true</enableComment>
                    <input>
                        <parameters>
                            <name>service</name>
                            <value>@default</value>
                        </parameters>
                        <parameters>
                            <name>branch</name>
                            <value>${dataspace}</value>
                        </parameters>
                        <parameters>
                            <name>instance</name>
                            <value>${dataset}</value>
                        </parameters>
                        <parameters>
                            <name>xpath</name>
                            <value>${item}</value>
                        </parameters>
                    </input>
                    <output/>
                </action>
                <bean>
                    <osdClass>com.cust.mdm.cust.usertask.UserTaskManagement2</osdClass>
                </bean>
                <termination>
                    <completionStrategy>allWorkItemsCompleted</completionStrategy>
                    <rejectionThreshold>0</rejectionThreshold>
                </termination>
            </userTask>
        </pnode>
        <pnode>
            <idInProcess>6</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Export item tables</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <scriptTask>
                <bean>
                    <library>true</library>
                    <osdClass>cust-mdm@com.cust.mdm.export.CSVFileExport</osdClass>
                    <param>
                        <paramName>dataspaceName</paramName>
                        <paramValue>Reference</paramValue>
                    </param>
                    <param>
                        <paramName>datasetName</paramName>
                        <paramValue>${dataset}</paramValue>
                    </param>
                    <param>
                        <paramName>tablePath</paramName>
                        <paramValue>${itemTable}</paramValue>
                    </param>
                    <param>
                        <paramName>filePath</paramName>
                        <paramValue>data\Items.csv,data\Item.csv,data\ItemIts.csv</paramValue>
                    </param>
                </bean>
            </scriptTask>
        </pnode>
        <pnode>
            <idInProcess>7</idInProcess>
            <documentation>
                <localizedDocumentations>
                    <locale>en_US</locale>
                    <label>Is user in role ?</label>
                </localizedDocumentations>
                <localizedDocumentations>
                    <locale>fr_FR</locale>
                </localizedDocumentations>
            </documentation>
            <hiddenInGraphicalView>false</hiddenInGraphicalView>
            <executionModeOfNextStep>asynchronous</executionModeOfNextStep>
            <condition>
                <bean>
                    <library>true</library>
                    <osdClass>cust-mdm@com.cust.mdm.workflowcondition.UserInRoleCondition</osdClass>
                    <param>
                        <paramName>userName</paramName>
                        <paramValue>user1</paramValue>
                    </param>
                    <param>
                        <paramName>roleName</paramName>
                        <paramValue>Role1</paramValue>
                    </param>
                </bean>
            </condition>
        </pnode>
        <plink>
            <fromNode>-1</fromNode>
            <toNode>0</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>0</fromNode>
            <toNode>7</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>1</fromNode>
            <toNode>2</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>2</fromNode>
            <toNode>3</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>3</fromNode>
            <toNode>4</toNode>
            <role>ifTrue</role>
        </plink>
        <plink>
            <fromNode>3</fromNode>
            <toNode>5</toNode>
            <role>ifFalse</role>
        </plink>
        <plink>
            <fromNode>4</fromNode>
            <toNode>6</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>5</fromNode>
            <toNode>2</toNode>
            <role>other</role>
        </plink>
        <plink>
            <fromNode>7</fromNode>
            <toNode>1</toNode>
            <role>ifFalse</role>
        </plink>
        <plink>
            <fromNode>7</fromNode>
            <toNode>4</toNode>
            <role>ifTrue</role>
        </plink>
    </definition>
</root>
